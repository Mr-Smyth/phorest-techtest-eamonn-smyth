<!-- ====== INCLUDE HEAD ====== -->
<%- include('./includes/head.ejs') %>
</head>

<!-- Align footer using flex -->
<body class="d-flex flex-column min-vh-100">

    <!-- ====== INCLUDE NAVIGATION BAR ====== -->
    <%- include('./includes/navigation.ejs') %>
    

    <!-- ====== MAIN CONTENT ======  -->
    <main class="container main__container flex-grow-1 mt-5">

        <!-- Only display this on the create voucher page -->
        <% if (path === '/voucher') { %>

            <h1 class="main__heading"><%= pageTitle %></h1>
            <h3>
                Create a Voucher for <%= clients.firstName %> <%= clients.lastName %>
            </h3>
            
            <!-- Form to handle amount of voucher -->
            <div class="container text-center mt-5">
                <form class="form-inline row no-gutters" action="/create-voucher" method="POST">
                    <div class="col-12 col-md-6 ml-auto  form-group mb-2">
                        <label for="amount" class="sr-only">Enter Amount of Vouncher</label>
                        <input type="number" min="0.00" max="1000.00" step="0.01" id="amount" name=amount placeholder="Enter the amount of the voucher" class="form-control col-12 col-md-10" required/>
                    </div>
                    <!-- Pass the client ID to the req body -->
                    <input type="hidden" name="clientId" value="<%= clients.clientId %>">
                    <button type="submit" class="btn action-button col-12 col-md-4 mr-auto mb-2">Create Voucher</button>
                </form>
            </div>  

        <% } else { %> 

            <!-- WE HAVE CREATED A VOUCHER - SUCCESS -->
            <div class="container">
                <div class="row col-12 no-gutters justify-content-center">
                    <h1 class="main__heading"><%= pageTitle %></h1>
                </div>
                <div class="row col-12 no-gutters justify-content-center">
                    <div class="col-lg-6">
                        <div class="card l-bg-cherry">
                            <!-- insert trolley icon and voucher details -->
                            <div class="card-voucher p-4">
                                <h1 class="text-center voucher-text">Gift Voucher</h1>
                                <div class="card-icon card-icon-large"><i class="fas fa-shopping-cart"></i></div>

                                <div class="row col-12 mt-4 justify-content-around">
                                    <h4 class="card-title mb-3 voucher-name"><%= voucher.client.firstName %> <%= voucher.client.lastName %></h4>
                                    <h1 class="d-flex align-items-center mb-0 voucher-amt">
                                        â‚¬<%= voucher.voucherData.remainingBalance.toFixed(2) %>
                                    </h1>
                                </div>
                                <div class="d-none d-md-block row col-12 mt-3">
                                    <p class="voucher-text voucher-id">Card Id: <%= voucher.voucherData.voucherId %></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        <% } %>   
    </main>

<!-- ====== INCLUDE FOOTER ====== -->
<%- include('./includes/end.ejs') %>